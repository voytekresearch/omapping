% Script generated by Brainstorm (15-Dec-2015)

% Input files
sFiles = [];
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Can this be automated if files saved in a consistent format? How to link 
%% subject name to raw files?
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
SubjectNames = {...
    'Subject01'};
RawFiles = {...
    'C:\Users\pseb1015\Documents\sample_resting\Anatomy', ...
    'C:\Users\pseb1015\Documents\sample_resting\Data\subj002_spontaneous_20111102_01_AUX.ds'};

% Start a new report
bst_report('Start', sFiles);

% Process: Import anatomy folder
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% use ocr (computer vision system toolbox) to recognize text and write to 
%% txt file. 
%% Is ROI always the same? Order? Write to file w. fields - fiducial points,
%% subject number
%% If fiducials do not exist, ask for manual process
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
sFiles = bst_process('CallProcess', 'process_import_anatomy', sFiles, [], ...
    'subjectname', SubjectNames{1}, ...
    'mrifile', {RawFiles{1}, 'FreeSurfer'}, ...
    'nvertices', 15000, ...
    'nas', [128, 225, 142], ...
    'lpa', [52, 123, 100], ...
    'rpa', [203, 127, 95], ...
    'ac', [132, 138, 153], ...
    'pc', [132, 109, 150], ...
    'ih', [134, 113, 217]);

% Process: Create link to raw file
sFiles = bst_process('CallProcess', 'process_import_data_raw', sFiles, [], ...
    'subjectname', SubjectNames{1}, ...
    'datafile', {RawFiles{2}, 'CTF'}, ...
    'channelreplace', 1, ...
    'channelalign', 1);

% Save and display report
ReportFile = bst_report('Save', sFiles);
bst_report('Open', ReportFile);

